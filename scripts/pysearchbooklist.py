import pickle


def book_list():
    with open("assets\\files\\booklist.dat", "rb") as f:
        try:
            print(
                f"_________________________________________________________________________________"
                f"________________________________________________________________")
            print(
                f"S.no.    Book I.D.            Author                       "
                f"Rental Price                          Book Name                                       ")
            print(
                f"_________________________________________________________________________________"
                f"________________________________________________________________")
            i = 1
            while True:
                l = pickle.load(f)
                print(
                    f"{i}.{' ' * (6 - len(str(i)))}  {l[0]}{' ' * (10 - len(l[0]))}"
                    f"     {l[2]}{' ' * (30 - len(l[2]))} ₹{l[3]}/week or ₹{l[4]}/month    {' ' * (6 - len(l[4]))}{l[1]}")
                i += 1
        except EOFError:
            print(
                f"_________________________________________________________________________________"
                f"________________________________________________________________")
            print(
                f"                                                   "
                f"Total {i - 1} books present in the library")
            print(
                f"_________________________________________________________________________________"
                f"________________________________________________________________")


def searchbook(self):
    a = self.upper()
    with open("assets\\files\\booklist.dat", "rb") as f:
        try:
            print(
                f"_________________________________________________________________________________"
                f"________________________________________________________________")
            print(
                f"S.no.    Book I.D.            Author                       "
                f"Rental Price                          Book Name                                       ")
            print(
                f"_________________________________________________________________________________"
                f"________________________________________________________________")
            b = a.split(" ")
            w = 1
            while True:
                l = pickle.load(f)
                r0 = l[0].split(" ")
                r1 = l[1].split(" ")
                r2 = l[2].split(" ")
                r3 = l[3].split(" ")
                r4 = l[4].split(" ")
                w1 = 0
                w2 = 0
                w3 = 0
                w4 = 0
                for i in r0:
                    for k in b:
                        if k == i:
                            print(
                                f"{w}.{' ' * (6 - len(str(w)))}  {l[0]}{' ' * (10 - len(l[0]))}"
                                f"     {l[2]}{' ' * (30 - len(l[2]))} ₹{l[3]}/week or ₹{l[4]}/month    {' ' * (6 - len(l[4]))}{l[1]}")
                            w += 1
                            w1 += 1
                            w2 += 1
                            w3 += 1
                            w4 += 1

                for i in r1:
                    for k in b:
                        if k in i and w1 == 0 and len(k) != 0:
                            print(
                                f"{w}.{' ' * (6 - len(str(w)))}  {l[0]}{' ' * (10 - len(l[0]))}"
                                f"     {l[2]}{' ' * (30 - len(l[2]))} ₹{l[3]}/week or ₹{l[4]}/month    {' ' * (6 - len(l[4]))}{l[1]}")
                            w += 1
                            w1 += 1
                            w2 += 1
                            w3 += 1
                            w4 += 1
                for i in r2:
                    for k in b:
                        if k in i and w2 == 0 and len(k) != 0:
                            print(
                                f"{w}.{' ' * (6 - len(str(w)))}  {l[0]}{' ' * (10 - len(l[0]))}"
                                f"     {l[2]}{' ' * (30 - len(l[2]))} ₹{l[3]}/week or ₹{l[4]}/month    {' ' * (6 - len(l[4]))}{l[1]}{()}")
                            w += 1
                            w1 += 1
                            w2 += 1
                            w3 += 1
                            w4 += 1

                for i in r3:
                    for k in b:
                        if k == i and w3 == 0:
                            print(
                                f"{w}.{' ' * (6 - len(str(w)))}  {l[0]}{' ' * (10 - len(l[0]))}"
                                f"     {l[2]}{' ' * (30 - len(l[2]))} ₹{l[3]}/week or ₹{l[4]}/month    {' ' * (6 - len(l[4]))}{l[1]}{()}")
                            w += 1
                            w1 += 1
                            w2 += 1
                            w3 += 1
                            w4 += 1
                for i in r4:
                    for k in b:
                        if k == i and w4 == 0:
                            print(
                                f"{w}.{' ' * (6 - len(str(w)))}  {l[0]}{' ' * (10 - len(l[0]))}"
                                f"     {l[2]}{' ' * (30 - len(l[2]))} ₹{l[3]}/week or ₹{l[4]}/month    {' ' * (6 - len(l[4]))}{l[1]}{()}")
                            w += 1
                            w1 += 1
                            w2 += 1
                            w3 += 1
                            w4 += 1
        except EOFError:
            if w == 2:
                print(
                    f"_________________________________________________________________________________"
                    f"________________________________________________________________")
                print(
                    f"                                                   "
                    f"{w - 1} book found in the library")
                print(
                    f"_________________________________________________________________________________"
                    f"________________________________________________________________")

            elif w == 1:
                print(
                    f"                                                  "
                    f"Sorry book found in the library")
                print(
                    f"_________________________________________________________________________________"
                    f"________________________________________________________________")

            else:
                print(
                    f"_________________________________________________________________________________"
                    f"________________________________________________________________")
                print(
                    f"                                                   "
                    f"{w - 1} books found in the library")
                print(
                    f"_________________________________________________________________________________"
                    f"________________________________________________________________")
